<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络基础 | Front-End-Basics</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="陈方旭的个人文档">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.f0c3bf6e.js" as="script"><link rel="preload" href="/assets/js/2.267df354.js" as="script"><link rel="preload" href="/assets/js/1.66cc43cf.js" as="script"><link rel="preload" href="/assets/js/26.5a8e32e6.js" as="script"><link rel="prefetch" href="/assets/js/10.8ed5e327.js"><link rel="prefetch" href="/assets/js/100.ae5b3443.js"><link rel="prefetch" href="/assets/js/101.cc73b0f5.js"><link rel="prefetch" href="/assets/js/102.3f3114fb.js"><link rel="prefetch" href="/assets/js/103.8ff5fdac.js"><link rel="prefetch" href="/assets/js/104.b5debdc3.js"><link rel="prefetch" href="/assets/js/105.8da11418.js"><link rel="prefetch" href="/assets/js/106.4dbe9edc.js"><link rel="prefetch" href="/assets/js/107.181bae05.js"><link rel="prefetch" href="/assets/js/108.89a63e22.js"><link rel="prefetch" href="/assets/js/109.ce54155a.js"><link rel="prefetch" href="/assets/js/11.066e1c25.js"><link rel="prefetch" href="/assets/js/110.f2e608ea.js"><link rel="prefetch" href="/assets/js/111.42921b66.js"><link rel="prefetch" href="/assets/js/112.8da31ceb.js"><link rel="prefetch" href="/assets/js/113.5ac3f0d4.js"><link rel="prefetch" href="/assets/js/114.e056e614.js"><link rel="prefetch" href="/assets/js/115.cebf7fde.js"><link rel="prefetch" href="/assets/js/116.2b434a84.js"><link rel="prefetch" href="/assets/js/117.100c132f.js"><link rel="prefetch" href="/assets/js/118.a4afed9a.js"><link rel="prefetch" href="/assets/js/119.f0f1a25d.js"><link rel="prefetch" href="/assets/js/12.9fe465cb.js"><link rel="prefetch" href="/assets/js/120.376850c5.js"><link rel="prefetch" href="/assets/js/121.5dc1a6a2.js"><link rel="prefetch" href="/assets/js/122.363693fb.js"><link rel="prefetch" href="/assets/js/123.7258fb95.js"><link rel="prefetch" href="/assets/js/124.a4bd3167.js"><link rel="prefetch" href="/assets/js/125.8aa8db7c.js"><link rel="prefetch" href="/assets/js/126.2caa71e3.js"><link rel="prefetch" href="/assets/js/127.220486dd.js"><link rel="prefetch" href="/assets/js/128.b01fb70e.js"><link rel="prefetch" href="/assets/js/129.bd8c1b32.js"><link rel="prefetch" href="/assets/js/13.ceec992d.js"><link rel="prefetch" href="/assets/js/130.9b3fd30c.js"><link rel="prefetch" href="/assets/js/131.c1e91c2d.js"><link rel="prefetch" href="/assets/js/132.6d39b36b.js"><link rel="prefetch" href="/assets/js/133.cc4ee14d.js"><link rel="prefetch" href="/assets/js/134.3b031de3.js"><link rel="prefetch" href="/assets/js/135.329aa943.js"><link rel="prefetch" href="/assets/js/136.e97d2b91.js"><link rel="prefetch" href="/assets/js/137.70ad5edc.js"><link rel="prefetch" href="/assets/js/138.b2388813.js"><link rel="prefetch" href="/assets/js/139.260e94e8.js"><link rel="prefetch" href="/assets/js/14.6b9e2f92.js"><link rel="prefetch" href="/assets/js/140.d0752482.js"><link rel="prefetch" href="/assets/js/141.c3809389.js"><link rel="prefetch" href="/assets/js/142.909571e7.js"><link rel="prefetch" href="/assets/js/143.9c55503a.js"><link rel="prefetch" href="/assets/js/144.037eb178.js"><link rel="prefetch" href="/assets/js/145.b15eb629.js"><link rel="prefetch" href="/assets/js/146.92f941e0.js"><link rel="prefetch" href="/assets/js/147.ee679e8f.js"><link rel="prefetch" href="/assets/js/148.259bd94c.js"><link rel="prefetch" href="/assets/js/149.0560570b.js"><link rel="prefetch" href="/assets/js/15.d25af981.js"><link rel="prefetch" href="/assets/js/150.e0970997.js"><link rel="prefetch" href="/assets/js/151.8c91c562.js"><link rel="prefetch" href="/assets/js/152.b2680c3d.js"><link rel="prefetch" href="/assets/js/153.43d5659d.js"><link rel="prefetch" href="/assets/js/154.41332198.js"><link rel="prefetch" href="/assets/js/155.36a0da41.js"><link rel="prefetch" href="/assets/js/156.8d9c6ad6.js"><link rel="prefetch" href="/assets/js/157.016cc281.js"><link rel="prefetch" href="/assets/js/158.c846bda8.js"><link rel="prefetch" href="/assets/js/159.60ef4fd7.js"><link rel="prefetch" href="/assets/js/16.fe68c618.js"><link rel="prefetch" href="/assets/js/160.e000f0e7.js"><link rel="prefetch" href="/assets/js/161.f67efc97.js"><link rel="prefetch" href="/assets/js/162.4eadc328.js"><link rel="prefetch" href="/assets/js/163.39e9bbe6.js"><link rel="prefetch" href="/assets/js/164.8e990d4c.js"><link rel="prefetch" href="/assets/js/165.9cc5569d.js"><link rel="prefetch" href="/assets/js/166.dcfd67ce.js"><link rel="prefetch" href="/assets/js/167.0a12942f.js"><link rel="prefetch" href="/assets/js/168.db0cf4d8.js"><link rel="prefetch" href="/assets/js/169.0177438a.js"><link rel="prefetch" href="/assets/js/17.de0b324b.js"><link rel="prefetch" href="/assets/js/170.799f7bf1.js"><link rel="prefetch" href="/assets/js/171.72b504b4.js"><link rel="prefetch" href="/assets/js/172.3fedbd3b.js"><link rel="prefetch" href="/assets/js/173.9d2d86ef.js"><link rel="prefetch" href="/assets/js/174.1a15c5a7.js"><link rel="prefetch" href="/assets/js/175.62da2bad.js"><link rel="prefetch" href="/assets/js/176.fa85299a.js"><link rel="prefetch" href="/assets/js/177.a4f8a83d.js"><link rel="prefetch" href="/assets/js/178.3da2977b.js"><link rel="prefetch" href="/assets/js/179.5a0698c9.js"><link rel="prefetch" href="/assets/js/18.75c085a9.js"><link rel="prefetch" href="/assets/js/180.b3c22f44.js"><link rel="prefetch" href="/assets/js/181.258acfab.js"><link rel="prefetch" href="/assets/js/182.3b612a1c.js"><link rel="prefetch" href="/assets/js/183.04d35baf.js"><link rel="prefetch" href="/assets/js/184.2f6ebfb6.js"><link rel="prefetch" href="/assets/js/185.3d2ba522.js"><link rel="prefetch" href="/assets/js/186.85211aa8.js"><link rel="prefetch" href="/assets/js/187.3a727290.js"><link rel="prefetch" href="/assets/js/188.39112337.js"><link rel="prefetch" href="/assets/js/189.160e194c.js"><link rel="prefetch" href="/assets/js/19.7d112bce.js"><link rel="prefetch" href="/assets/js/190.c053d7a2.js"><link rel="prefetch" href="/assets/js/191.22cefdac.js"><link rel="prefetch" href="/assets/js/192.964f5e88.js"><link rel="prefetch" href="/assets/js/193.700abf9f.js"><link rel="prefetch" href="/assets/js/194.e267a0f1.js"><link rel="prefetch" href="/assets/js/195.e49141be.js"><link rel="prefetch" href="/assets/js/196.abd378ac.js"><link rel="prefetch" href="/assets/js/197.49b8f519.js"><link rel="prefetch" href="/assets/js/198.f60281e1.js"><link rel="prefetch" href="/assets/js/199.2444da81.js"><link rel="prefetch" href="/assets/js/20.81f5b440.js"><link rel="prefetch" href="/assets/js/200.54f5e6d4.js"><link rel="prefetch" href="/assets/js/201.132bab0f.js"><link rel="prefetch" href="/assets/js/202.cd5ef700.js"><link rel="prefetch" href="/assets/js/203.6524ae1d.js"><link rel="prefetch" href="/assets/js/204.79049883.js"><link rel="prefetch" href="/assets/js/205.b453ac0d.js"><link rel="prefetch" href="/assets/js/206.8e68e3cb.js"><link rel="prefetch" href="/assets/js/207.0dbf0bb5.js"><link rel="prefetch" href="/assets/js/208.a6f0aa62.js"><link rel="prefetch" href="/assets/js/209.5eb00898.js"><link rel="prefetch" href="/assets/js/21.b8f03079.js"><link rel="prefetch" href="/assets/js/210.5394d572.js"><link rel="prefetch" href="/assets/js/211.4d73566d.js"><link rel="prefetch" href="/assets/js/212.01ea7dd7.js"><link rel="prefetch" href="/assets/js/213.80261d17.js"><link rel="prefetch" href="/assets/js/214.42974ae8.js"><link rel="prefetch" href="/assets/js/215.6a9aefd7.js"><link rel="prefetch" href="/assets/js/216.71698897.js"><link rel="prefetch" href="/assets/js/217.cbdb7908.js"><link rel="prefetch" href="/assets/js/218.e1ca46a4.js"><link rel="prefetch" href="/assets/js/219.4bff8927.js"><link rel="prefetch" href="/assets/js/22.ce37cd53.js"><link rel="prefetch" href="/assets/js/220.d29e2c08.js"><link rel="prefetch" href="/assets/js/221.6a2c607c.js"><link rel="prefetch" href="/assets/js/222.7209db02.js"><link rel="prefetch" href="/assets/js/223.18f8b9df.js"><link rel="prefetch" href="/assets/js/224.52b820e0.js"><link rel="prefetch" href="/assets/js/225.46e90caa.js"><link rel="prefetch" href="/assets/js/226.63ed554a.js"><link rel="prefetch" href="/assets/js/227.7fafc4da.js"><link rel="prefetch" href="/assets/js/228.7706dc54.js"><link rel="prefetch" href="/assets/js/229.842a1964.js"><link rel="prefetch" href="/assets/js/23.87e7e45e.js"><link rel="prefetch" href="/assets/js/230.ddc0f55a.js"><link rel="prefetch" href="/assets/js/231.e72fa0a7.js"><link rel="prefetch" href="/assets/js/232.e15e10a1.js"><link rel="prefetch" href="/assets/js/233.9001d006.js"><link rel="prefetch" href="/assets/js/234.c55b49d9.js"><link rel="prefetch" href="/assets/js/235.da1bf5f9.js"><link rel="prefetch" href="/assets/js/236.9efb932c.js"><link rel="prefetch" href="/assets/js/237.67412574.js"><link rel="prefetch" href="/assets/js/238.24ef619f.js"><link rel="prefetch" href="/assets/js/239.1f2a6298.js"><link rel="prefetch" href="/assets/js/24.5aa30e8d.js"><link rel="prefetch" href="/assets/js/240.9c9279b1.js"><link rel="prefetch" href="/assets/js/241.695630cd.js"><link rel="prefetch" href="/assets/js/242.891e7aef.js"><link rel="prefetch" href="/assets/js/243.edd26862.js"><link rel="prefetch" href="/assets/js/244.ed576d71.js"><link rel="prefetch" href="/assets/js/245.d10042cf.js"><link rel="prefetch" href="/assets/js/246.d57006a7.js"><link rel="prefetch" href="/assets/js/247.b2d6742e.js"><link rel="prefetch" href="/assets/js/248.8b56d853.js"><link rel="prefetch" href="/assets/js/249.b8fc1805.js"><link rel="prefetch" href="/assets/js/25.5c7b2cfe.js"><link rel="prefetch" href="/assets/js/250.1aad43ae.js"><link rel="prefetch" href="/assets/js/251.be9db929.js"><link rel="prefetch" href="/assets/js/252.afedca09.js"><link rel="prefetch" href="/assets/js/253.c6e86855.js"><link rel="prefetch" href="/assets/js/254.90b4f52a.js"><link rel="prefetch" href="/assets/js/255.227c9c47.js"><link rel="prefetch" href="/assets/js/256.fe3714d4.js"><link rel="prefetch" href="/assets/js/257.3e5db4f7.js"><link rel="prefetch" href="/assets/js/258.29013d06.js"><link rel="prefetch" href="/assets/js/259.e9af4b51.js"><link rel="prefetch" href="/assets/js/260.9555612d.js"><link rel="prefetch" href="/assets/js/261.e8e200a0.js"><link rel="prefetch" href="/assets/js/262.0f393806.js"><link rel="prefetch" href="/assets/js/263.42b99650.js"><link rel="prefetch" href="/assets/js/264.5e36cccd.js"><link rel="prefetch" href="/assets/js/265.e7759e0e.js"><link rel="prefetch" href="/assets/js/266.2bce58fa.js"><link rel="prefetch" href="/assets/js/267.6e2a5a40.js"><link rel="prefetch" href="/assets/js/27.997b1485.js"><link rel="prefetch" href="/assets/js/28.ef6638c6.js"><link rel="prefetch" href="/assets/js/29.c9d728b9.js"><link rel="prefetch" href="/assets/js/3.dc3407e1.js"><link rel="prefetch" href="/assets/js/30.d873fb03.js"><link rel="prefetch" href="/assets/js/31.2bf741ce.js"><link rel="prefetch" href="/assets/js/32.551ac32b.js"><link rel="prefetch" href="/assets/js/33.b6573b5c.js"><link rel="prefetch" href="/assets/js/34.b46900a8.js"><link rel="prefetch" href="/assets/js/35.f131466c.js"><link rel="prefetch" href="/assets/js/36.89942ede.js"><link rel="prefetch" href="/assets/js/37.0e54922b.js"><link rel="prefetch" href="/assets/js/38.36f714a1.js"><link rel="prefetch" href="/assets/js/39.2256d2d3.js"><link rel="prefetch" href="/assets/js/4.43d53c19.js"><link rel="prefetch" href="/assets/js/40.784c879e.js"><link rel="prefetch" href="/assets/js/41.8bac5a7b.js"><link rel="prefetch" href="/assets/js/42.b6e7fc8b.js"><link rel="prefetch" href="/assets/js/43.ab92dcea.js"><link rel="prefetch" href="/assets/js/44.666a8d67.js"><link rel="prefetch" href="/assets/js/45.23a7d54d.js"><link rel="prefetch" href="/assets/js/46.c90bff29.js"><link rel="prefetch" href="/assets/js/47.b109dec7.js"><link rel="prefetch" href="/assets/js/48.7f766765.js"><link rel="prefetch" href="/assets/js/49.0a8e763d.js"><link rel="prefetch" href="/assets/js/5.b6321aed.js"><link rel="prefetch" href="/assets/js/50.686d1521.js"><link rel="prefetch" href="/assets/js/51.9936e373.js"><link rel="prefetch" href="/assets/js/52.f0b789de.js"><link rel="prefetch" href="/assets/js/53.5438164d.js"><link rel="prefetch" href="/assets/js/54.ec6f1f74.js"><link rel="prefetch" href="/assets/js/55.002caceb.js"><link rel="prefetch" href="/assets/js/56.d7896533.js"><link rel="prefetch" href="/assets/js/57.560f886c.js"><link rel="prefetch" href="/assets/js/58.ede39d55.js"><link rel="prefetch" href="/assets/js/59.f8e25f0e.js"><link rel="prefetch" href="/assets/js/6.8dc86351.js"><link rel="prefetch" href="/assets/js/60.16e85fb0.js"><link rel="prefetch" href="/assets/js/61.c4a68cdb.js"><link rel="prefetch" href="/assets/js/62.b8285ec7.js"><link rel="prefetch" href="/assets/js/63.cea2c4d9.js"><link rel="prefetch" href="/assets/js/64.33d06366.js"><link rel="prefetch" href="/assets/js/65.7dacc788.js"><link rel="prefetch" href="/assets/js/66.1c982721.js"><link rel="prefetch" href="/assets/js/67.5509334e.js"><link rel="prefetch" href="/assets/js/68.f9deb190.js"><link rel="prefetch" href="/assets/js/69.fd052a09.js"><link rel="prefetch" href="/assets/js/7.4de4dc57.js"><link rel="prefetch" href="/assets/js/70.b36ecec1.js"><link rel="prefetch" href="/assets/js/71.09472ede.js"><link rel="prefetch" href="/assets/js/72.7fc03c28.js"><link rel="prefetch" href="/assets/js/73.1df4ed7b.js"><link rel="prefetch" href="/assets/js/74.eef842dd.js"><link rel="prefetch" href="/assets/js/75.a4642706.js"><link rel="prefetch" href="/assets/js/76.2921120f.js"><link rel="prefetch" href="/assets/js/77.8959d3b8.js"><link rel="prefetch" href="/assets/js/78.15af67c9.js"><link rel="prefetch" href="/assets/js/79.ca2b3995.js"><link rel="prefetch" href="/assets/js/80.86253068.js"><link rel="prefetch" href="/assets/js/81.4dfb5100.js"><link rel="prefetch" href="/assets/js/82.40f05690.js"><link rel="prefetch" href="/assets/js/83.ae59f017.js"><link rel="prefetch" href="/assets/js/84.a16c2086.js"><link rel="prefetch" href="/assets/js/85.78764153.js"><link rel="prefetch" href="/assets/js/86.6da75781.js"><link rel="prefetch" href="/assets/js/87.9093c83e.js"><link rel="prefetch" href="/assets/js/88.1b71ff61.js"><link rel="prefetch" href="/assets/js/89.c3298594.js"><link rel="prefetch" href="/assets/js/90.dbab72f7.js"><link rel="prefetch" href="/assets/js/91.201c3950.js"><link rel="prefetch" href="/assets/js/92.23d20e66.js"><link rel="prefetch" href="/assets/js/93.35dc98bf.js"><link rel="prefetch" href="/assets/js/94.da768453.js"><link rel="prefetch" href="/assets/js/95.9767a2ff.js"><link rel="prefetch" href="/assets/js/96.890fcdc4.js"><link rel="prefetch" href="/assets/js/97.4bdcd3d5.js"><link rel="prefetch" href="/assets/js/98.972a16fd.js"><link rel="prefetch" href="/assets/js/99.44f9b5d3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a900b7e8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Front-End-Basics" class="logo"> <span class="site-name can-hide">Front-End-Basics</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/article/" class="nav-link">
  捡贝壳
</a></div> <a href="https://github.com/qiqihaobenben/Front-End-Basics" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/article/" class="nav-link">
  捡贝壳
</a></div> <a href="https://github.com/qiqihaobenben/Front-End-Basics" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTTP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/network-basics/http/into.html" class="sidebar-link">HTTP 简介</a></li><li><a href="/network-basics/http/basic.html" class="sidebar-link">重新认识 HTTP</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网络基础"><a href="#网络基础" class="header-anchor">#</a> 网络基础</h1> <h2 id="网络分层模型"><a href="#网络分层模型" class="header-anchor">#</a> 网络分层模型</h2> <h3 id="tcp-ip-四层模型"><a href="#tcp-ip-四层模型" class="header-anchor">#</a> TCP/IP 四层模型</h3> <ul><li>应用层</li> <li>传输层</li> <li>网络层</li> <li>网络接口层</li></ul> <h3 id="osi-七层模型"><a href="#osi-七层模型" class="header-anchor">#</a> OSI 七层模型</h3> <ul><li>应用层</li> <li>表示层</li> <li>会话层</li> <li>传输层</li> <li>网络层</li> <li>数据链路层</li> <li>物理层</li></ul> <p><img src="/assets/img/osi-seven2.de85bb6a.png" alt=""></p> <p><img src="/assets/img/osi-model-detail.b48071a5.png" alt=""></p> <h3 id="五层模型"><a href="#五层模型" class="header-anchor">#</a> 五层模型</h3> <ul><li>应用层</li> <li>传输层</li> <li>网络层</li> <li>链接层 ： 它在&quot;实体层&quot;的上方，确定了 0 和 1 的分组方式。例如：以太网协议</li> <li>实体层 ： 就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送 0 和 1 的电信号。例如，光缆、电缆、双绞线、无线电波等</li></ul> <h2 id="网络传输"><a href="#网络传输" class="header-anchor">#</a> 网络传输</h2> <h3 id="以太网协议"><a href="#以太网协议" class="header-anchor">#</a> 以太网协议</h3> <p>以太网规定，一组电信号构成一个数据包，叫做&quot;帧&quot;（Frame）。每一帧分成两个部分：标头（Head）和数据（Data）。</p> <p>&quot;标头&quot;包含数据包的一些说明项，比如发送者、接受者、数据类型等等；&quot;数据&quot;则是数据包的具体内容。</p> <ul><li>&quot;标头&quot;的长度，固定为 18 字节。</li> <li>&quot;数据&quot;的长度，最短为 46 字节，最长为 1500 字节。</li> <li>因此，整个&quot;帧&quot;最短为 64 字节，最长为 1518 字节。</li> <li>如果数据很长，就必须分割成多个帧进行发送。</li></ul> <h4 id="mac-地址"><a href="#mac-地址" class="header-anchor">#</a> MAC 地址</h4> <p>以太网规定，连入网络的所有设备，都必须具有&quot;网卡&quot;接口。数据包必须是从一块网卡，传送到另一块网卡。网卡的地址，就是数据包的发送地址和接收地址，这叫做 MAC 地址。</p> <p>每块网卡出厂的时候，都有一个全世界独一无二的 MAC 地址，长度是 48 个二进制位，通常用 12 个十六进制数表示，例如：<code>00:1A:2B:3C:4D:5E</code>。</p> <p>以太网数据包的&quot;标头&quot;，包含了发送者和接受者的信息，发送者和接受者就是通过 MAC 地址标识的。</p> <h4 id="广播"><a href="#广播" class="header-anchor">#</a> 广播</h4> <p>有了 MAC 地址，系统怎样才能把数据包准确送到接收方？</p> <p>回答是以太网采用了一种很&quot;原始&quot;的方式，它不是把数据包准确送到接收方，而是向本网络内所有计算机发送，让每台计算机自己判断，是否为接收方。</p> <p>例如：1 号计算机向 2 号计算机发送一个数据包，同一个子网络的 3 号、4 号、5 号计算机都会收到这个包。它们读取这个包的&quot;标头&quot;，找到接收方的 MAC 地址，然后与自身的 MAC 地址相比较，如果两者相同，就接受这个包，做进一步处理，否则就丢弃这个包。这种发送方式就叫做&quot;广播&quot;（broadcasting）。</p> <h4 id="arp-地址解析协议"><a href="#arp-地址解析协议" class="header-anchor">#</a> ARP 地址解析协议</h4> <h4 id="链接层"><a href="#链接层" class="header-anchor">#</a> 链接层</h4> <p>有了数据包的定义、网卡的 MAC 地址、广播的发送方式，&quot;链接层&quot;就可以在多台计算机之间传送数据了。</p> <h3 id="ip-协议"><a href="#ip-协议" class="header-anchor">#</a> IP 协议</h3> <h4 id="网络层的来源"><a href="#网络层的来源" class="header-anchor">#</a> 网络层的来源</h4> <p>以太网协议，依靠 MAC 地址发送数据。理论上，单单依靠 MAC 地址，上海的网卡就可以找到洛杉矶的网卡了，技术上是可以实现的。不过上海和洛杉矶的电脑在同一个巨型网络中，这几乎是不可能的，巨型网络必须分成一个个的子网络，子网络在分成一个个的子网络，这样才是一个合理的架构，所以上海和洛杉矶肯定会不同的子网络中。</p> <p>单单依靠 MAC 地址，上海的网卡就可以找到洛杉矶的网卡了，技术上是可以实现的，不过这样做有一个重大的缺点。以太网采用广播方式发送数据包，所有成员人手一&quot;包&quot;，不仅效率低，而且局限在发送者所在的子网络。也就是说，如果两台计算机不在同一个子网络，广播是传不过去的。这种设计是合理的，否则互联网上每一台计算机都会收到所有包，那会引起灾难。</p> <p>例如 MAC 地址是每个人的身份证号，网络通信想象成在一个大城市派送快递，仅仅知道身份证号，快递员不知道该去哪里送，肯定不能挨家挨户的去敲门比对身份证。</p> <p>因此，必须找到一种方法，能够区分哪些 MAC 地址属于同一个子网络，哪些不是。如果是同一个子网络，就采用广播方式发送，否则就采用&quot;路由&quot;方式发送。遗憾的是，MAC 地址本身无法做到这一点。它只与厂商有关，与所处网络无关。</p> <p>这就导致了&quot;网络层&quot;的诞生。它的作用是引进一套新的地址，使得我们能够区分不同的计算机是否属于同一个子网络。这套地址就叫做&quot;网络地址&quot;，简称&quot;网址&quot;。这个地址就像你们家的门牌号，快递员就可以按照门牌号找到你家，再验证你的身份中就可以确定是否派送正确。即网络设备根据 IP 地址选择路径，根据 MAC 地址进行实际传输。</p> <p>于是，&quot;网络层&quot;出现以后，每台计算机有了两种地址，一种是 MAC 地址，另一种是网络地址。两种地址之间没有任何联系，MAC 地址是绑定在网卡上的，网络地址则是管理员分配的，它们只是随机组合在一起。</p> <p><strong>网络地址帮助我们确定计算机所在的子网络，MAC 地址则将数据包送到该子网络中的目标网卡。因此，从逻辑上可以推断，必定是先处理网络地址，然后再处理 MAC 地址。</strong></p> <h4 id="ip-协议详情"><a href="#ip-协议详情" class="header-anchor">#</a> IP 协议详情</h4> <p>规定网络地址的协议，叫做 IP 协议。它所定义的地址，就被称为 IP 地址。</p> <p>目前，广泛采用的是 IP 协议第四版，简称 IPv4。这个版本规定，网络地址由 32 个二进制位组成。习惯上，我们用分成四段的十进制数表示 IP 地址，从 0.0.0.0 一直到 255.255.255.255。</p> <ul><li>172.16.254.1</li> <li>10101100.00010000.11111110.00000001</li></ul> <p>互联网上的每一台计算机，都会分配到一个 IP 地址。这个地址分成两个部分，前一部分代表网络，后一部分代表主机。比如，IP 地址 172.16.254.1/24，这是一个 32 位的地址，它的网络部分是前 24 位（172.16.254），那么主机部分就是后 8 位（最后的那个 1）。处于同一个子网络的电脑，它们 IP 地址的网络部分必定是相同的，也就是说 172.16.254.2 应该与 172.16.254.1 处在同一个子网络。</p> <p>怎样才能从 IP 地址，判断两台计算机是否属于同一个子网络呢？这就要用到另一个参数&quot;子网掩码&quot;（subnet mask）。</p> <p>所谓&quot;子网掩码&quot;，就是表示子网络特征的一个参数。它在形式上等同于 IP 地址，也是一个 32 位二进制数字，它的网络部分全部为 1，主机部分全部为 0。比如，IP 地址 172.16.254.1，如果已知网络部分是前 24 位，主机部分是后 8 位，那么子网络掩码就是 11111111.11111111.11111111.00000000，写成十进制就是 255.255.255.0。</p> <p>知道&quot;子网掩码&quot;，我们就能判断，任意两个 IP 地址是否处在同一个子网络。方法是将两个 IP 地址与子网掩码分别进行 AND 运算（两个数位都为 1，运算结果为 1，否则为 0），然后比较结果是否相同，如果是的话，就表明它们在同一个子网络中，否则就不是。</p> <p>比如，已知 IP 地址 172.16.254.1 和 172.16.254.233 的子网掩码都是 255.255.255.0，请问它们是否在同一个子网络？两者与子网掩码分别进行 AND 运算，结果都是 172.16.254.0，因此它们在同一个子网络。</p> <h4 id="ip-数据包"><a href="#ip-数据包" class="header-anchor">#</a> IP 数据包</h4> <p>根据 IP 协议发送的数据，就叫做 IP 数据包。不难想象，其中必定包括 IP 地址信息。</p> <p>但是前面说过，以太网数据包只包含 MAC 地址，并没有 IP 地址的栏位。那么是否需要修改数据定义，再添加一个栏位呢？</p> <p>回答是不需要，我们可以把 IP 数据包直接放进以太网数据包的&quot;数据&quot;部分，因此完全不用修改以太网的规格。这就是互联网分层结构的好处：上层的变动完全不涉及下层的结构。</p> <p>具体来说，IP 数据包也分为&quot;标头&quot;和&quot;数据&quot;两个部分。</p> <p>&quot;标头&quot;部分主要包括版本、长度、IP 地址等信息，&quot;数据&quot;部分则是 IP 数据包的具体内容。</p> <p>IP 数据包的&quot;标头&quot;部分的长度为 20 到 60 字节，整个数据包的总长度最大为 65,535 字节。因此，理论上，一个 IP 数据包的&quot;数据&quot;部分，最长为 65,515 字节。前面说过，以太网数据包的&quot;数据&quot;部分，最长只有 1500 字节。因此，如果 IP 数据包超过了 1500 字节，它就需要分割成几个以太网数据包，分开发送了。</p> <h3 id="tcp、udp-协议"><a href="#tcp、udp-协议" class="header-anchor">#</a> TCP、UDP 协议</h3> <h4 id="传输层的来源"><a href="#传输层的来源" class="header-anchor">#</a> 传输层的来源</h4> <p>有了 MAC 地址和 IP 地址，我们已经可以在互联网上任意两台主机上建立通信。</p> <p>接下来的问题是，同一台主机上有许多程序都需要用到网络，比如，你一边浏览网页，一边与朋友在线聊天。当一个数据包从互联网上发来的时候，你怎么知道，它是表示网页的内容，还是表示在线聊天的内容？</p> <p>也就是说，我们还需要一个参数，表示这个数据包到底供哪个程序（进程）使用。这个参数就叫做&quot;端口&quot;（port），它其实是每一个使用网卡的程序的编号。每个数据包都发到主机的特定端口，所以不同的程序就能取到自己所需要的数据。</p> <p>&quot;端口&quot;是 0 到 65535 之间的一个整数，正好 16 个二进制位。0 到 1023 的端口被系统占用，用户只能选用大于 1023 的端口。不管是浏览网页还是在线聊天，应用程序会随机选用一个端口，然后与服务器的相应端口联系。</p> <p>**&quot;传输层&quot;的功能，就是建立&quot;端口到端口&quot;的通信。相比之下，&quot;网络层&quot;的功能是建立&quot;主机到主机&quot;的通信。只要确定主机和端口，我们就能实现程序之间的交流。因此，Unix 系统就把主机+端口，叫做&quot;套接字&quot;（socket）。**有了它，就可以进行网络应用程序开发了。</p> <h4 id="udp-协议"><a href="#udp-协议" class="header-anchor">#</a> UDP 协议</h4> <p>经过上面的分析我们必须在数据包中加入端口信息，这就需要新的协议。最简单的实现叫做 UDP 协议，它的格式几乎就是在数据前面，加上端口号。</p> <p>UDP 数据包，也是由&quot;标头&quot;和&quot;数据&quot;两部分组成。</p> <p>&quot;标头&quot;部分主要定义了发出端口和接收端口，&quot;数据&quot;部分就是具体的内容。然后，把整个 UDP 数据包放入 IP 数据包的&quot;数据&quot;部分，而前面说过，IP 数据包又是放在以太网数据包之中的，所以整个以太网数据包现在变成了下面这样：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm4AAAB7CAMAAAD68vwgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFEMTYzNjgwQUFENjExRTFBM0Y2QzIyNEU2RjFBMkFCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFEMTYzNjgxQUFENjExRTFBM0Y2QzIyNEU2RjFBMkFCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUQxNjM2N0VBQUQ2MTFFMUEzRjZDMjI0RTZGMUEyQUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUQxNjM2N0ZBQUQ2MTFFMUEzRjZDMjI0RTZGMUEyQUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4V868gAAAAYFBMVEX9/vyPz1JQhcC3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" alt=""></p> <p>UDP 数据包非常简单，&quot;标头&quot;部分一共只有 8 个字节，总长度不超过 65,535 字节，正好放进一个 IP 数据包。</p> <h3 id="tcp-协议"><a href="#tcp-协议" class="header-anchor">#</a> TCP 协议</h3> <p>UDP 协议的优点是比较简单，容易实现，但是缺点是可靠性较差，一旦数据包发出，无法知道对方是否收到。</p> <p>为了解决这个问题，提高网络可靠性，TCP 协议就诞生了。这个协议非常复杂，但可以近似认为，它就是有确认机制的 UDP 协议，每发出一个数据包都要求确认。如果有一个数据包遗失，就收不到确认，发出方就知道有必要重发这个数据包了。</p> <p>因此，TCP 协议能够确保数据不会遗失。它的缺点是过程复杂、实现困难、消耗较多的资源。</p> <p>TCP 数据包和 UDP 数据包一样，都是内嵌在 IP 数据包的&quot;数据&quot;部分。TCP 数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常 TCP 数据包的长度不会超过 IP 数据包的长度，以确保单个 TCP 数据包不必再分割。</p> <h3 id="应用层传输协议-http、ftp、smtp、pop3、imap4、dhcp"><a href="#应用层传输协议-http、ftp、smtp、pop3、imap4、dhcp" class="header-anchor">#</a> 应用层传输协议（HTTP、FTP、SMTP、POP3、IMAP4、DHCP）</h3> <p>&quot;应用层&quot;的作用，就是规定应用程序的数据格式。</p> <p>举例来说，TCP 协议可以为各种各样的程序传递数据，比如 Email、WWW、FTP 等等。那么，必须有不同协议规定电子邮件、网页、FTP 数据的格式，这些应用程序协议就构成了&quot;应用层&quot;。</p> <p>这是最高的一层，直接面对用户。它的数据就放在 TCP 数据包的&quot;数据&quot;部分。</p> <p><img src="/assets/img/yingyongceng.63955c84.png" alt=""></p> <h4 id="dhcp"><a href="#dhcp" class="header-anchor">#</a> DHCP</h4> <p>设备联网后有一个所谓&quot;动态 IP 地址&quot;，指计算机开机后，会自动分配到一个 IP 地址，不用人为设定。它使用的协议叫做 DHCP 协议。</p> <p>它是一种应用层协议，建立在 UDP 协议之上，所以整个数据包是这样的：</p> <p><img src="/assets/img/dhcp.2d5a2a6a.png" alt=""></p> <p>这个协议规定，每一个子网络中，有一台计算机负责管理本网络的所有 IP 地址，它叫做&quot;DHCP 服务器&quot;。新的计算机加入网络，必须向&quot;DHCP 服务器&quot;发送一个&quot;DHCP 请求&quot;数据包，申请 IP 地址和相关的网络参数。</p> <p>前面说过，如果两台计算机在同一个子网络，必须知道对方的 MAC 地址和 IP 地址，才能发送数据包。但是，新加入的计算机不知道这两个地址，怎么发送数据包呢？DHCP 协议做了一些巧妙的规定。</p> <p>（1）最前面的&quot;以太网标头&quot;，设置发出方（本机）的 MAC 地址和接收方（DHCP 服务器）的 MAC 地址。前者就是本机网卡的 MAC 地址，后者这时不知道，就填入一个广播地址：FF-FF-FF-FF-FF-FF。</p> <p>（2）后面的&quot;IP 标头&quot;，设置发出方的 IP 地址和接收方的 IP 地址。这时，对于这两者，本机都不知道。于是，发出方的 IP 地址就设为 0.0.0.0，接收方的 IP 地址设为 255.255.255.255。</p> <p>（3）最后的&quot;UDP 标头&quot;，设置发出方的端口和接收方的端口。这一部分是 DHCP 协议规定好的，发出方是 68 端口，接收方是 67 端口。</p> <p>这个数据包构造完成后，就可以发出了。以太网是广播发送，同一个子网络的每台计算机都收到了这个包。因为接收方的 MAC 地址是 FF-FF-FF-FF-FF-FF，看不出是发给谁的，所以每台收到这个包的计算机，还必须分析这个包的 IP 地址，才能确定是不是发给自己的。当看到发出方 IP 地址是 0.0.0.0，接收方是 255.255.255.255，于是 DHCP 服务器知道&quot;这个包是发给我的&quot;，而其他计算机就可以丢弃这个包。</p> <p>接下来，DHCP 服务器读出这个包的数据内容，分配好 IP 地址，发送回去一个&quot;DHCP 响应&quot;数据包。这个响应包的结构也是类似的，以太网标头的 MAC 地址是双方的网卡地址，IP 标头的 IP 地址是 DHCP 服务器的 IP 地址（发出方）和 255.255.255.255（接收方），UDP 标头的端口是 67（发出方）和 68（接收方），分配给请求端的 IP 地址和本网络的具体参数则包含在 Data 部分。</p> <p>新加入的计算机收到这个响应包，于是就知道了自己的 IP 地址、子网掩码、网关地址、DNS 服务器等等参数。</p> <h2 id="网络通信的过程"><a href="#网络通信的过程" class="header-anchor">#</a> 网络通信的过程</h2> <p>发送者和接受者通过 MAC 地址标识，这是第一步：定义地址</p> <p>随后的第一个问题就是一块网卡怎么会知道另一块网卡的 MAC 地址？或者说发送方的网卡怎么知道接收方的 MAC 地址？</p> <p>就算有了接收方的 MAC 地址，系统怎样才能把数据包准确送到接收方？</p> <p>有了对方的 MAC 地址和 IP 地址，数据包才能准确送到接收者手中。但是，前面说过，MAC 地址有局限性，如果两台电脑不在同一个子网络，就无法知道对方的 MAC 地址，必须通过网关（gateway）转发。</p> <p>例如：1 号电脑要向 4 号电脑发送一个数据包。它先判断 4 号电脑是否在同一个子网络，结果发现不是，于是就把这个数据包发到网关 A。网关 A 通过路由协议，发现 4 号电脑位于子网络 B，又把数据包发给网关 B，网关 B 再转发到 4 号电脑。</p> <p>1 号电脑把数据包发到网关 A，必须知道网关 A 的 MAC 地址。所以，数据包的目标地址，实际上分成两种情况：</p> <ul><li>在同一个子网络，必须知道对方的 MAC 地址，对方的 IP 地址，采用广播方式发送数据包。</li> <li>在不同的子网络，必须知道自己网关的 MAC 地址，对方的 IP 地址，采用路由方式发送数据包。</li></ul> <h3 id="对方的网关-ip-如何获得"><a href="#对方的网关-ip-如何获得" class="header-anchor">#</a> 对方的网关 IP 如何获得？</h3> <p>路由器如何确定目标网关 IP：</p> <ol><li>路由表（Routing Table）机制：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>路由器根据目标IP地址（192.168.2.100）和子网掩码判断：
- 查看自己的路由表
- 匹配最佳路由路径
- 确定下一跳（next hop）的IP地址
</code></pre></div><ol start="2"><li>路由表示例：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>目标网络        子网掩码          下一跳          接口
0.0.0.0/0      0.0.0.0         10.0.0.1        eth0    (默认路由)
192.168.1.0    255.255.255.0   直连            eth1
192.168.2.0    255.255.255.0   192.168.3.1     eth2
</code></pre></div><ol start="3"><li>路由选择过程：</li></ol> <ul><li>当收到目标 IP 为 192.168.2.100 的数据包</li> <li>路由器将目标 IP 和路由表中的每个条目匹配</li> <li>发现 192.168.2.0/24 这个网段匹配</li> <li>查找对应的下一跳 IP：192.168.3.1</li></ul> <p>就像快递分拣：</p> <ul><li>查看收件地址的邮编（IP 地址）</li> <li>对照分拣路线表（路由表）</li> <li>确定要转发到哪个分拨中心（下一跳）</li></ul> <p>如果没有具体匹配的路由：</p> <ul><li>使用默认路由（0.0.0.0/0）</li> <li>转发给默认网关</li> <li>就像不认识的地址都转给总分拨中心处理</li></ul> <h4 id="路由表和互联网路由"><a href="#路由表和互联网路由" class="header-anchor">#</a> 路由表和互联网路由</h4> <p>路由表的来源和互联网路由过程：</p> <ol><li>路由表的来源：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>A. 直连路由
- 路由器自动添加直接连接的网段
- 如本地局域网 192.168.1.0/24

B. 静态路由
- 网络管理员手动配置
- 适用于小型网络

C. 动态路由
- 通过路由协议自动学习
- 常见协议：
  - 内部网关协议(IGP)：OSPF、RIP
  - 外部网关协议(EGP)：BGP
</code></pre></div><ol start="2"><li>跨互联网寻找目标过程：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>示例：从 192.168.1.100 访问 59.100.2.100

A. 局域网内部
192.168.1.100 -&gt; 本地网关(192.168.1.1)

B. ISP网络
本地网关 -&gt; ISP边缘路由器
- 使用ISP的动态路由协议
- BGP协议在不同ISP之间交换路由信息

C. 骨干网络
- 通过BGP找到目标IP所属的ISP
- 选择最优路径转发

D. 目标网络
最终到达目标IP所在的网关
</code></pre></div><p>就像邮政系统：</p> <ul><li>你的包裹先到社区邮局（本地网关）</li> <li>转给市级分拨中心（ISP）</li> <li>通过省级中心（骨干网）</li> <li>最终到达目标城市分拨中心（目标网关）</li></ul> <ol start="3"><li>BGP 的作用：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>- 维护全网路由表
- 交换路由信息
- 选择最佳路径
- 确保不同ISP之间的互联互通
</code></pre></div><p>这就是为什么即使只知道目标 IP，数据包也能准确送达的原因。整个过程依赖于：</p> <ul><li>本地路由表</li> <li>ISP 的路由协议</li> <li>全球 BGP 系统</li> <li>各级路由器的协同工作</li></ul> <h2 id="网络通信中的数据包"><a href="#网络通信中的数据包" class="header-anchor">#</a> 网络通信中的数据包</h2> <h3 id="http-数据包"><a href="#http-数据包" class="header-anchor">#</a> HTTP 数据包</h3> <p>以 HTTP 为例，浏览网页用的是 HTTP 协议，它的整个数据包构造是这样的：</p> <p><img src="/assets/img/http.a3d99459.png" alt=""></p> <p>HTTP 部分的内容，类似于下面这样：</p> <div class="language- extra-class"><pre class="language-text"><code>　　GET / HTTP/1.1
　　Host: www.google.com
　　Connection: keep-alive
　　User-Agent: Mozilla/5.0 (Windows NT 6.1) ......
　　Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
　　Accept-Encoding: gzip,deflate,sdch
　　Accept-Language: zh-CN,zh;q=0.8
　　Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3
　　Cookie: ... ...
</code></pre></div><p>假定这个部分的长度为 4960 字节，它会被嵌在 TCP 数据包之中。</p> <h3 id="tcp-数据包"><a href="#tcp-数据包" class="header-anchor">#</a> TCP 数据包</h3> <p>TCP 数据包需要设置端口，接收方（Google）的 HTTP 端口默认是 80，发送方（本机）的端口是一个随机生成的 1024-65535 之间的整数，假定为 51775。</p> <p>TCP 数据包的标头长度为 20 字节，加上嵌入 HTTP 的数据包，总长度变为 4980 字节。</p> <h3 id="ip-数据包-2"><a href="#ip-数据包-2" class="header-anchor">#</a> IP 数据包</h3> <p>然后，TCP 数据包再嵌入 IP 数据包。IP 数据包需要设置双方的 IP 地址，这是已知的，发送方是 192.168.1.100（本机），接收方是 172.194.72.105（Google）。</p> <p>IP 数据包的标头长度为 20 字节，加上嵌入的 TCP 数据包，总长度变为 5000 字节。</p> <h3 id="以太网数据包"><a href="#以太网数据包" class="header-anchor">#</a> 以太网数据包</h3> <p>最后，IP 数据包嵌入以太网数据包。以太网数据包需要设置双方的 MAC 地址，发送方为本机的网卡 MAC 地址，接收方为网关 192.168.1.1 的 MAC 地址（通过 ARP 协议得到）。</p> <p>以太网数据包的数据部分，最大长度为 1500 字节，而现在的 IP 数据包长度为 5000 字节。因此，IP 数据包必须分割成四个包。因为每个包都有自己的 IP 标头（20 字节），所以四个包的 IP 数据包的长度分别为 1500、1500、1500、560。</p> <h3 id="服务端接收到包"><a href="#服务端接收到包" class="header-anchor">#</a> 服务端接收到包</h3> <p>经过多个网关的转发，Google 的服务器 172.194.72.105，收到了这四个以太网数据包。</p> <p>根据 IP 标头的序号，Google 将四个包拼起来，取出完整的 TCP 数据包，然后读出里面的&quot;HTTP 请求&quot;，接着做出&quot;HTTP 响应&quot;，再用 TCP 协议发回来。</p> <p>本机收到 HTTP 响应以后，就可以将网页显示出来，完成一次网络通信。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/qiqihaobenben/Front-End-Basics/edit/master/docs/network-basics/basic.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/6/2025, 6:40:40 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0c3bf6e.js" defer></script><script src="/assets/js/2.267df354.js" defer></script><script src="/assets/js/1.66cc43cf.js" defer></script><script src="/assets/js/26.5a8e32e6.js" defer></script>
  </body>
</html>
