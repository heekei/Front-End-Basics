(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{570:function(s,t,a){"use strict";a.r(t);var e=a(25),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"数据库优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库优化"}},[s._v("#")]),s._v(" 数据库优化")]),s._v(" "),t("h2",{attrs:{id:"例-1-创建表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#例-1-创建表"}},[s._v("#")]),s._v(" 例 1：创建表")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" company "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tcompany_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcompany_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\treview_status "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态，1-正常，2-停用'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcreate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tupdate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("company_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'公司基本信息'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"优化过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化过程"}},[s._v("#")]),s._v(" 优化过程")]),s._v(" "),t("p",[s._v("这个 "),t("code",[s._v("CREATE TABLE")]),s._v(" 的 SQL 语句总体看起来是能够正常执行的，但它存在一些潜在的问题和需要优化的地方，另外可能会报错 "),t("code",[s._v("ERROR 1067 (42000): Invalid default value for 'update_time'")]),s._v("，尤其是从"),t("strong",[s._v("可读性")]),s._v("、"),t("strong",[s._v("性能优化")]),s._v("以及"),t("strong",[s._v("业务需求的可扩展性")]),s._v("方面考虑。以下是具体的分析和改进建议：")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_1-char-50-的使用问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-char-50-的使用问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1. "),t("code",[s._v("char(50)")]),s._v(" 的使用问题")])]),s._v(" "),t("h4",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("company_name")]),s._v(" 字段使用了 "),t("code",[s._v("char(50)")]),s._v("，这是一种固定长度的字符串类型。")]),s._v(" "),t("li",[s._v("如果公司名称的长度不固定（比如有的公司名只有几个字符），使用 "),t("code",[s._v("char")]),s._v(" 会浪费存储空间，因为它会为所有记录分配固定的 50 字节。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ul",[t("li",[s._v("将 "),t("code",[s._v("char(50)")]),s._v(" 改为 "),t("code",[s._v("varchar(50)")]),s._v("，"),t("code",[s._v("varchar")]),s._v(" 是变长字符串类型，能够根据实际存储的数据长度分配空间，更加节省存储资源。")])]),s._v(" "),t("p",[t("strong",[s._v("改进后：")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("company_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n")])])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-review-status-字段设计问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-review-status-字段设计问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("2. "),t("code",[s._v("review_status")]),s._v(" 字段设计问题")])]),s._v(" "),t("h4",{attrs:{id:"问题-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-2"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("review_status")]),s._v(" 使用 "),t("code",[s._v("tinyint")]),s._v(" 来存储状态，这种设计虽然可行，但建议在业务中明确状态含义时使用**枚举（ENUM）**类型，或者创建一个映射表来存储状态信息。")]),s._v(" "),t("li",[s._v("如果以后需要增加更多状态（比如 3-审核中，4-已删除），直接修改代码中硬编码的状态值会导致维护成本增加。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-2"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("方案一：使用 ENUM")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("review_status "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENUM")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'正常'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'停用'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态，正常、停用'")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("方案二：建立状态映射表")]),s._v("\n创建一个独立的 "),t("code",[s._v("review_status")]),s._v(" 表，存储状态值和描述。这样可以更方便地扩展和维护。")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" review_status "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    status_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    status_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态描述'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("主表 "),t("code",[s._v("company")]),s._v(" 的 "),t("code",[s._v("review_status")]),s._v(" 字段使用外键关联（外键不推荐使用）：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("review_status "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态，关联 review_status 表'")]),s._v("\n")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-时间字段的默认值问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-时间字段的默认值问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3. 时间字段的默认值问题")])]),s._v(" "),t("h4",{attrs:{id:"问题-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-3"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("create_time")]),s._v(" 和 "),t("code",[s._v("update_time")]),s._v(" 是 "),t("code",[s._v("timestamp")]),s._v(" 类型，但没有设置默认值，可能导致插入数据时需要手动提供这些字段的值。")]),s._v(" "),t("li",[s._v("一般情况下，"),t("code",[s._v("create_time")]),s._v(" 应该默认当前时间，"),t("code",[s._v("update_time")]),s._v(" 应该自动更新为当前时间（如果记录被修改）。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-3"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ul",[t("li",[s._v("为 "),t("code",[s._v("create_time")]),s._v(" 和 "),t("code",[s._v("update_time")]),s._v(" 字段添加默认值和自动更新功能。")])]),s._v(" "),t("p",[t("strong",[s._v("改进后：")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("create_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nupdate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新时间'")]),s._v("\n")])])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_4-表注释和字段注释的规范化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-表注释和字段注释的规范化"}},[s._v("#")]),s._v(" "),t("strong",[s._v("4. 表注释和字段注释的规范化")])]),s._v(" "),t("h4",{attrs:{id:"问题-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-4"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[s._v("表的注释 "),t("code",[s._v("公司基本信息")]),s._v(" 和字段的注释 "),t("code",[s._v("状态，1-正常，2-停用")]),s._v(" 比较简单，建议更加详细地描述用途和含义，增强可读性。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-4"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ul",[t("li",[s._v("优化为更全面的描述，例如：\n"),t("ul",[t("li",[s._v("表注释："),t("code",[s._v("存储公司基本信息，包括公司名称、审核状态、创建时间和更新时间。")])]),s._v(" "),t("li",[s._v("字段注释："),t("code",[s._v("状态，1-正常，2-停用（表示公司当前运营状态）")]),s._v("。")])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_5-字符集问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-字符集问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("5. 字符集问题")])]),s._v(" "),t("h4",{attrs:{id:"问题-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-5"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[s._v("表的字符集设置为 "),t("code",[s._v("utf8")]),s._v("，而 MySQL 的 "),t("code",[s._v("utf8")]),s._v(" 实际上只支持最多 3 个字节的字符，无法存储某些 4 字节的 Unicode 字符（如 emoji 表情）。")]),s._v(" "),t("li",[s._v("如果可能需要存储特殊字符（如公司名中包含表情符号），建议使用 "),t("code",[s._v("utf8mb4")]),s._v(" 字符集。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-5"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ul",[t("li",[s._v("将表的字符集设置为 "),t("code",[s._v("utf8mb4")]),s._v("，以支持更多字符集。")])]),s._v(" "),t("p",[t("strong",[s._v("改进后：")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("charset")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8mb4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'存储公司基本信息，包括公司名称、审核状态、创建时间和更新时间。'")]),s._v("\n")])])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_6-缺少唯一约束或索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-缺少唯一约束或索引"}},[s._v("#")]),s._v(" "),t("strong",[s._v("6. 缺少唯一约束或索引")])]),s._v(" "),t("h4",{attrs:{id:"问题-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-6"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[s._v("在实际业务中，"),t("code",[s._v("company_name")]),s._v(" 很可能需要唯一性约束，以保证公司名称不重复。")]),s._v(" "),t("li",[s._v("如果将来需要频繁查询 "),t("code",[s._v("review_status")]),s._v("，建议为该字段添加索引以提高查询性能。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-6"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("为 "),t("code",[s._v("company_name")]),s._v(" 添加唯一约束：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("company_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'公司名称，唯一'")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("为 "),t("code",[s._v("review_status")]),s._v(" 添加索引：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_review_status "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" company"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("review_status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_7-缺少外键关联"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-缺少外键关联"}},[s._v("#")]),s._v(" "),t("strong",[s._v("7. 缺少外键关联")])]),s._v(" "),t("h4",{attrs:{id:"问题-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题-7"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("ul",[t("li",[s._v("如果系统中有其他表需要和 "),t("code",[s._v("company")]),s._v(" 表关联（比如员工表 "),t("code",[s._v("employee")]),s._v(" 需要关联公司信息），建议为主键 "),t("code",[s._v("company_id")]),s._v(" 添加外键约束。")]),s._v(" "),t("li",[s._v("当前定义的 "),t("code",[s._v("company_id")]),s._v(" 是主键，但没有说明是否会作为其他表的外键使用。")])]),s._v(" "),t("h4",{attrs:{id:"改进建议-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进建议-7"}},[s._v("#")]),s._v(" 改进建议：")]),s._v(" "),t("ul",[t("li",[s._v("为 "),t("code",[s._v("company_id")]),s._v(" 明确外键用途，并在相关表中显式定义外键约束。")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"最终优化后的-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最终优化后的-sql"}},[s._v("#")]),s._v(" "),t("strong",[s._v("最终优化后的 SQL")])]),s._v(" "),t("p",[s._v("结合上面的所有建议，优化后的 SQL 如下：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" company "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    company_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'公司 ID，主键'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    company_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'公司名称，唯一'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    review_status "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENUM")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'正常'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'停用'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态：正常、停用'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    create_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    update_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("company_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_review_status "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("review_status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8mb4\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'存储公司基本信息，包括公司名称、审核状态、创建时间和更新时间。'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" "),t("strong",[s._v("总结")])]),s._v(" "),t("p",[s._v("优化后的 SQL 主要解决了以下问题：")]),s._v(" "),t("ol",[t("li",[s._v("替换 "),t("code",[s._v("char(50)")]),s._v(" 为更灵活的 "),t("code",[s._v("varchar(50)")]),s._v("。")]),s._v(" "),t("li",[s._v("改进 "),t("code",[s._v("review_status")]),s._v(" 的表示方式，使用 "),t("code",[s._v("ENUM")]),s._v(" 更清晰，或者结合状态映射表增强扩展性。")]),s._v(" "),t("li",[s._v("为时间字段添加默认值和自动更新功能。")]),s._v(" "),t("li",[s._v("使用 "),t("code",[s._v("utf8mb4")]),s._v(" 字符集以支持更多字符。")]),s._v(" "),t("li",[s._v("为常用字段添加索引和唯一约束，提升查询性能和数据完整性。")])]),s._v(" "),t("p",[s._v("通过这些优化，表的设计更加规范、灵活，并且能够很好地适应未来的需求。如果还有其他问题，欢迎继续提问！ 😊")])])}),[],!1,null,null,null);t.default=r.exports}}]);